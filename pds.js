var v=0,d=class{wraps;children=[];id="L"+v++;constructor(t){this.wraps=t,this.wraps.id=this.id}add(t){if(t!=null){let e;typeof t=="string"?e=new n(t):e=t,this.children.push(e),this.wraps.appendChild(e.wraps)}else throw new Error("node undefined");return this}remove(t){let e=this.children.indexOf(t);if(e<0)throw new Error("node not a child of this node");this.children.splice(e,1),this.wraps.removeChild(t.wraps)}with(...t){return t.forEach(e=>{this.add(e)}),this}style(t){return t(this.wraps.style),this}class(t){return this.wraps.classList.add(t),this}};var u=class extends d{constructor(){let t=document.createElement("div");t.classList.add("LContainer"),super(t)}},h=class extends u{constructor(){super(),this.wraps.classList.add("LColumn")}},l=class extends u{constructor(){super(),this.wraps.classList.add("LRow")}};var o=class extends d{_text="";get text(){return this._text}set text(t){this._text=t,this.wraps.textContent=t}},n=class extends o{constructor(t=""){let e=document.createElement("span");e.classList.add("LLabel"),super(e),this.text=t}},w=class extends o{constructor(t,e){let r=document.createElement("button");r.textContent=t,r.addEventListener("click",e),r.classList.add("LButton"),super(r),this.text=t}},x=class extends o{constructor(t="text"){let e=document.createElement("input");e.type=t,e.classList.add("LInput"),super(e)}set placeholder(t){this.wraps.placeholder=t}get value(){return this.wraps.value}set value(t){this.wraps.value=t,this.watching.forEach(e=>e(t))}watching=[];watch(t){this.watching.push(t),this.wraps.oninput=e=>{t(this.value)},t(this.value)}};var p=new d(document.body);var y=new l;async function L(s,t,e=null){let r=`https://${s}/xrpc/${t}`;if(e){let c=new URLSearchParams;for(let a in e)c.append(a,e[a].toString());r+="?"+c.toString()}return await(await fetch(r)).json()}async function E(s){let t=await L(s,"com.atproto.sync.listRepos",{limit:100}),e=new h;return e.add(`=== ${s.toUpperCase()} ===`),p.add(e),t.repos.filter(r=>r.active).forEach(async r=>{let c=new n(""),a=await L(s,"com.atproto.repo.describeRepo",{repo:r.did});a.handleIsCorrect||(a.handle+="\u26A0\uFE0F "),c.text+=a.handle,e.add(c)}),e}var f=new x,i,m=new w("GO!",async()=>{m.wraps.disabled=!0,i&&p.remove(i);try{i=await E(f.value)}catch{i=new n("Failed"),p.add(i)}console.log(i),m.wraps.disabled=!1});p.add(new l().with("List 100 active users on PDS: ",f,m));
