"use strict";(()=>{var E=0,l=class{constructor(e){this.children=[];this.id="L"+E++;this.wraps=e,this.wraps.id=this.id}add(e){if(e!=null){let t;typeof e=="string"?t=new i(e):t=e,this.children.push(t),this.wraps.appendChild(t.wraps)}else throw new Error("node undefined");return this}remove(e){let t=this.children.indexOf(e);if(t<0)throw new Error("node not a child of this node");this.children.splice(t,1),this.wraps.removeChild(e.wraps)}with(...e){return e.forEach(t=>{this.add(t)}),this}style(e){return e(this.wraps.style),this}class(e){return this.wraps.classList.add(e),this}};var u=class extends l{constructor(){let e=document.createElement("div");e.classList.add("LContainer"),super(e)}},h=class extends u{constructor(){super(),this.wraps.classList.add("LColumn")}},d=class extends u{constructor(){super(),this.wraps.classList.add("LRow")}};var c=class extends l{constructor(){super(...arguments);this._text=""}get text(){return this._text}set text(t){this._text=t,this.wraps.textContent=t}},i=class extends c{constructor(e=""){let t=document.createElement("span");t.classList.add("LLabel"),super(t),this.text=e}},w=class extends c{constructor(e,t){let s=document.createElement("button");s.textContent=e,s.addEventListener("click",t),s.classList.add("LButton"),super(s),this.text=e}},m=class extends c{constructor(t="text"){let s=document.createElement("input");s.type=t,s.classList.add("LInput");super(s);this.watching=[]}set placeholder(t){this.wraps.placeholder=t}get value(){return this.wraps.value}set value(t){this.wraps.value=t,this.watching.forEach(s=>s(t))}watch(t){this.watching.push(t),this.wraps.oninput=s=>{t(this.value)},t(this.value)}};var p=new l(document.body);var _=new d;async function L(r,e,t=null){let s=`https://${r}/xrpc/${e}`;if(t){let o=new URLSearchParams;for(let n in t)o.append(n,t[n].toString());s+="?"+o.toString()}return await(await fetch(s)).json()}async function v(r){let e=await L(r,"com.atproto.sync.listRepos",{limit:100}),t=new h;return t.add(`=== ${r.toUpperCase()} ===`),p.add(t),e.repos.filter(s=>s.active).forEach(async s=>{let o=new i(""),n=await L(r,"com.atproto.repo.describeRepo",{repo:s.did});n.handleIsCorrect||(n.handle+="\u26A0\uFE0F "),o.text+=n.handle,t.add(o)}),t}var x=new m,a,g=new w("GO!",async()=>{g.wraps.disabled=!0,a&&p.remove(a);try{a=await v(x.value)}catch{a=new i("Failed"),p.add(a)}console.log(a),g.wraps.disabled=!1});p.add(new d().with("List 100 active users on PDS: ",x,g));})();
